{% extends 'main.html' %}

{% load static %}

{% block content %}


<div class="container h-100">
    <div class="d-flex justify-content-center h-100">
        <div>
            <div class="d-flex justify-content-center">
                <h3 id="form-title">Add Raw Materials</h3>
            </div>
            <div class="d-flex justify-content-center form_container">
                <form id="myForm" method="POST" action="">
                    {% csrf_token %}
                    <label>Description:</label>
                    <input type="text" name="description" placeholder="Product Name..." class="form-control" required>

                    <select name="product_issue">
                        {% for product_issue in product_issues %}
                        <option value="{{ product.id }}">{{ product_issue.id }}</option>
                        {% endfor %}
                    </select>

                    <table id="myTable">
                        <tr>
                            <td>
                                <select name="product_0">
                                    {% for product in products %}
                                    <option value="{{ product.id }}">{{ product.id }}-{{ product.product_name }}
                                    </option>
                                    {% endfor %}
                                </select>
                            </td>
                            <td><input type="text" name="uom_0"></td>
                            <td><input type="number" step="0.01" name="qty_0"></td>
                            <td><input type="text" name="product_issue_0"></td>
                            <td>
                                <button onclick="removeRow(this)">Remove</button>
                            </td>
                        </tr>
                    </table>
                    <button onclick="addRow()">Add Row</button>


                    <button type="submit">Save</button>
                </form>

            </div>
            {% for message in messages %}
            <p id="messages"> {{ message }}</p>
            {% endfor %}


        </div>
    </div>
</div>

<script>
    var allProducts = JSON.parse(document.getElementById("productData").textContent);
</script>
<div id="productData" style="display: none;">{{ products|safe }}</div>


{% endblock %}
